% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/time.R
\name{switch_at_time}
\alias{switch_at_time}
\title{Conditionally execute functions depending on the current time}
\usage{
switch_at_time(
  before,
  after,
  at_time,
  months = NULL,
  days = NULL,
  wdays = NULL,
  tz = "Asia/Seoul",
  before_args = list(),
  after_args = list()
)
}
\arguments{
\item{before}{A function to execute \emph{before} the cutoff time.}

\item{after}{A function to execute \emph{after} the cutoff time.}

\item{at_time}{Character string of the form \code{"HH:MM"} (24-hour format)
indicating the time boundary at which behavior switches.}

\item{months}{Optional integer vector (1–12). If supplied, switching
occurs only when the current month is included.}

\item{days}{Optional integer vector (1–31). If supplied, switching
occurs only when today's day-of-month is included.}

\item{wdays}{Optional integer vector (0–6) or weekday names
(\code{"Mon"}, \code{"Tue"}, …). If supplied, switching occurs only on matching
weekdays (\code{0 = Sunday}).}

\item{tz}{A time-zone string passed to \code{Sys.time()} and used to
construct the cutoff time. Defaults to \code{"Asia/Seoul"}.}

\item{before_args}{A named list of arguments passed to \code{before()}
using \code{do.call()}.}

\item{after_args}{A named list of arguments passed to \code{after()}
using \code{do.call()}.}
}
\value{
The return value of either \code{before()} or \code{after()}, depending on
the current time and calendar rules.
}
\description{
\code{switch_at_time()} evaluates the current date and time and chooses
between two functions — \code{before()} or \code{after()} — depending on whether
the current time is before or after a specified cutoff \code{at_time}.
}
\details{
Optionally, switching can be restricted to specific calendar rules
(e.g., only on certain months, days, or weekdays). The functions
\code{before()} and \code{after()} can each receive their own argument lists via
\code{before_args} and \code{after_args}.

The function performs three layers of logic:
\enumerate{
\item \strong{Validate time format}
\code{at_time} must strictly follow \code{"HH:MM"} (e.g., \code{"09:30"}, \code{"15:05"}).
\item \strong{Evaluate optional calendar rules}
If any of \code{months}, \code{days}, or \code{wdays} are provided, switching only
occurs when the current date satisfies \emph{all} supplied rules.
Otherwise, \code{before()} is executed regardless of time.
\item \strong{Evaluate cutoff time}
When rules are satisfied, the function compares the current time
with today's cutoff timestamp constructed from \code{at_time}:
\itemize{
\item If current time < cutoff → \code{before()}
\item Otherwise → \code{after()}
}
}
}
\examples{
\dontrun{
# Simple example: switch at 15:30 every day
switch_at_time(
  before = function() "Before cutoff",
  after  = function() "After cutoff",
  at_time = "15:30"
)

# Example with argument lists
switch_at_time(
  before = function(x) paste("Before:", x),
  after  = function(x) paste("After:", x),
  at_time = "10:00",
  before_args = list(x = 1),
  after_args  = list(x = 2)
)

# Only switch on Mondays before/after 09:00
switch_at_time(
  before  = function() "Mon AM",
  after   = function() "Mon PM",
  at_time = "09:00",
  wdays   = "Mon"
)
}

}
