% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/sampling.R
\name{.compute_sample_size}
\alias{.compute_sample_size}
\title{Compute required sample size for a proportion (relative margin)}
\usage{
.compute_sample_size(
  p,
  r,
  conf.level = 0.95,
  method = c("wald", "wilson"),
  ceiling_out = TRUE,
  n_upper = 1e+07
)
}
\arguments{
\item{p}{Numeric vector of true/expected proportions (0 < \code{p} < 1).}

\item{r}{Numeric vector of target relative margins of error (0 < \code{r} < 1).}

\item{conf.level}{Confidence level (default 0.95).}

\item{method}{One of \code{c("wald","wilson")}. Defaults to \code{"wald"}.}

\item{ceiling_out}{Logical; if \code{TRUE} (default), round up to the next integer.
(Used directly by Wald; passed through to Wilson.)}

\item{n_upper}{Maximum search bound for the Wilson method (default \code{1e7}).}
}
\value{
Numeric vector of required sample sizes (same length as \code{p}).
}
\description{
Unified front-end that dispatches to either the \strong{Wald} (closed-form)
or \strong{Wilson} (numerical search) method to obtain the sample size
achieving a target \emph{relative margin of error} at a given confidence level.
}
\details{
\itemize{
\item Wald uses the closed-form formula \deqn{n = \frac{z^2 (1 - p)}{r^2 p}}
\item Wilson increases \eqn{n} until the Wilson half-width is no greater than
\eqn{r \cdot p}. The Wald solution is used as a fast initial guess.
}
}
\keyword{internal}
